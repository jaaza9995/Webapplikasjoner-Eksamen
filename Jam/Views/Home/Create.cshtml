@model Jam.ViewModels.EditStoryViewModel

<h2>@(Model.IsEditMode ? "Edit Story" : "Create New Story")</h2>

<form asp-action="CreateOrEdit" method="post">
    <input type="hidden" asp-for="Step" />
    <input type="hidden" asp-for="IsEditMode" />
    <input type="hidden" asp-for="StoryId" />

    @{
        var partials = new[]
        {
            "Partials/_CreateIntro",
            "Partials/_CreateQuestions",
            "Partials/_CreateEndings"
        };
    }

    <partial name="@partials[Model.Step - 1]" model="Model" />

    <div class="mt-3 d-flex justify-content-between">
        @if (Model.Step > 1)
        {
            <button type="submit" name="action" value="Back" class="btn btn-secondary">Back</button>
        }

        @if (Model.Step < partials.Length)
        {
            <button type="submit" name="action" value="Next" class="btn btn-primary">Next</button>
        }
        else
        {
            <button type="submit" name="action" value="Finish" class="btn btn-success">
                @(Model.IsEditMode ? "Save Changes" : "Finish")
            </button>
        }
    </div>
</form>